<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
html, body { height: 100%; }
circle { fill: #135a97; }
line { stroke: #135a97; stroke-width: 2.5; }
</style>
</head>
<body>
<script src="//d3js.org/d3.v4.min.js"></script>
<script>
var width = document.body.offsetWidth
var height = document.body.offsetHeight

var svg = d3.select('body').append('svg')
    .attr('width', width)
    .attr('height', height)
    .on('ontouchstart' in document ? 'touchmove' : 'mousemove', particle)

var nodes = []

var simulation = d3.forceSimulation()
    .on('tick', ticked)

function ticked() {
    svg.selectAll('circle')
        .attr('cx', function (d) { return d.x })
        .attr('cy', function (d) { return d.y })
}

function particle() {
    var x = d3.event.offsetX
    var y = d3.event.offsetY

    var node = { x: x, y: y }

    var t = d3.transition().delay(3000)

    svg.append('circle')
        .datum(node)
        .attr('class', 'node')
        .attr('r', 4.5)
        .transition(t)
        .attr('r', 0)
        .remove()

    nodes.push(node)

    simulation.nodes(nodes)
    simulation.restart()
}
</script>
</body>
</html>
